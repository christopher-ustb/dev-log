---
title: 载入器
date: 2016-11-8 14:14:35
categories: 
- Java
tags:
- java
- tomcat
- 读书笔记
---

# 载入器

servlet容器需要实现一个自定义的载入器，出于以下原因：
* 将WEB-INF/classes目录下的应用类与更高级别的容器类用不同的classloader隔离开来
* 根据classes文件是否发生变化实现类的自动重新装载

## Java的类加载器

类加载器的双亲委托模型

## Loader接口

Loader接口指的是Web应用程序载入器，而不仅仅是类载入器。

```java
public interface Loader {
    // properties
    // 使用的classloader实例
    ClassLoader getClassLoader();
    // 绑定的context级别的container
    Container getContainer();
    DefaultContext getDefaultContext();
    // 是否委托给一个父类载入器
    boolean getDelegate();
    String getInfo();
    // 是否支持自动重载
    boolean getReloadable();
    // method
    void addPropertyChangeListener(PropertyChangeListener listener);
    void addRepository(String repository);
    String[] findRepositories();
    // 仓库中的class被修改了，触发类重新加载事件
    boolean modified();
    void removePropertyChangeListener(PropertyChangeListener listener);
}
```
