(function(){function e(e){if(r)e(r);else{var n=new XMLHttpRequest;n.open("GET",g,!0),n.onload=function(){if(this.status>=200&&this.status<300){var n=JSON.parse(this.response);r=n instanceof Array?n:n.posts,e(r)}else console.error(this.statusText)},n.onerror=function(){console.error(this.statusText)},n.send()}}function n(e,n){return e.replace(/\{\w+\}/g,function(e){var t=e.replace(/\{|\}/g,"");return n[t]||""})}function t(e){var t="";t=e.length?e.map(function(e){return n(L,{title:e.title,path:e.path,date:new Date(e.date).toLocaleDateString(),tags:e.tags.map(function(e){return"<span>#"+e.name+"</span>"}).join("")})}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',v.innerHTML=t}function i(e,n){return n.lastIndex=0,n.test(e)}function s(e,n){return i(e.title,n)||e.tags.some(function(e){return i(e.name,n)})||i(e.text,n)}function a(n){var i=this.value.trim();if(i){var a=new RegExp(i.replace(/[ ]/g,"|"),"gmi");e(function(e){var n=e.filter(function(e){return s(e,a)});t(n),E.show()}),n.preventDefault()}}var r,o=window||this,c=o.BLOG.even,u=o.BLOG.$,l=u("#search"),d=u("#search-wrap"),f=u("#key"),p=u("#back"),h=u("#search-panel"),v=u("#search-result"),L=u("#search-tpl").innerHTML,g=("/"+o.BLOG.ROOT+"/content.json").replace(/\/{2}/g,"/"),w=o.BLOG.docEl,m=o.BLOG.noop,E={show:function(){window.innerWidth<760?w.classList.add("lock-size"):m,h.classList.add("in")},hide:function(){window.innerWidth<760?w.classList.remove("lock-size"):m,h.classList.remove("in")}};l.addEventListener(c,function(){d.classList.toggle("in"),f.value="",f.focus()}),p.addEventListener(c,function(){d.classList.remove("in"),E.hide()}),document.addEventListener(c,function(e){"key"!==e.target.id&&E.hide()}),f.addEventListener("input",a),f.addEventListener(c,a)}).call(this);