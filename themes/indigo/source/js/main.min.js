!function(e,t){var n=t.body,a=t.querySelector("html"),s=t.getElementById("gotop"),o=t.getElementById("menu"),l=t.getElementById("header"),r=t.getElementById("mask"),c=t.getElementById("menu-toggle"),d=t.getElementById("menu-off"),f=t.getElementById("loading"),u=e.requestAnimationFrame,v="ontouchstart"in window?"touchstart":"click",g=function(){},h=function(e){var t=e.offsetLeft,n=e.offsetTop;if(e.offsetParent){var i=arguments.callee(e.offsetParent);t+=i.x,n+=i.y}return{x:t,y:n}},m=navigator.userAgent.indexOf("Firefox")!==-1?t.documentElement:n,L={goTop:function(){var e=m.scrollTop;e>400?(m.scrollTop=e-400,u(arguments.callee)):m.scrollTop=0},toggleGotop:function(t){t>e.innerHeight/2?s.classList.add("in"):s.classList.remove("in")},toggleMenu:function(t){t?(o.classList.remove("hide"),e.innerWidth<1241&&(r.classList.add("in"),o.classList.add("show"),a.classList.add("lock"))):(o.classList.remove("show"),r.classList.remove("in"),a.classList.remove("lock"))},fixedHeader:function(e){e>l.clientHeight?l.classList.add("fixed"):l.classList.remove("fixed")},fixedToc:function(){function n(t){for(i=0,len=c.length;i<len;i++)if(t>h(c[i]).y-r){a.querySelector("li.active").classList.remove("active");var n=a.querySelector('a[href="#'+c[i].id+'"]').parentNode;n.classList.add("active"),n.offsetTop>=a.clientHeight-r?a.scrollTop=n.offsetTop-a.clientHeight+parseInt(e.innerHeight/3):a.scrollTop=0}t<h(c[0]).y&&(a.querySelector("li.active").classList.remove("active"),a.querySelector('a[href="#'+c[0].id+'"]').parentNode.classList.add("active"))}var a=t.getElementById("post-toc");if(!a||!a.children.length)return g;var s=h(a),o=s.y,r=l.clientHeight,c=t.getElementById("post-content").querySelectorAll("h1, h2, h3, h4, h5, h6");return a.querySelector('a[href="#'+c[0].id+'"]').parentNode.classList.add("active"),[].forEach.call(t.querySelectorAll('a[href^="#"]'),function(e){e.addEventListener("click",function(e){e.preventDefault(),m.scrollTop=h(t.querySelector('[id="'+decodeURIComponent(this.hash).substr(1)+'"]')).y-r+10})}),function(e){e>o-r?a.classList.add("fixed"):a.classList.remove("fixed"),n(e)}}(),share:function(){function n(t){e.open(encodeURI(o.replace("{service}",t)))}function i(){r.classList.add("in"),l.classList.add("in")}function a(){l.classList.remove("in"),r.classList.remove("in")}var s,o,l=t.getElementById("global-share"),c=t.getElementById("menu-share"),d=t.getElementById("post-share"),f=t.getElementById("share-fab"),u=t.createElement("div"),g=t.getElementsByClassName("share-sns");u.innerHTML=BLOG_SHARE.summary,s=u.innerText,u=void 0,o="http://www.jiathis.com/send/?webid={service}&url="+BLOG_SHARE.url+"&title="+BLOG_SHARE.title+"&summary="+s+"&pic="+location.protocol+"//"+location.host+BLOG_SHARE.pic,[].forEach.call(g,function(e){e.addEventListener("click",function(){n(this.dataset.service)},!1)}),c.addEventListener(v,function(){i()},!1),r.addEventListener(v,function(){a()},!1),f&&f.addEventListener(v,function(){d.classList.toggle("in")},!1)},search:function(){function e(){n.classList.toggle("in")}var n=t.getElementById("search-wrap");t.getElementById("search").addEventListener(v,e)},reward:function(){function e(){r.classList.add("in"),a.classList.add("ready"),setTimeout(function(){a.classList.add("in"),t.addEventListener(v,i)},0)}function n(){r.classList.remove("in"),a.classList.remove("in"),setTimeout(function(){a.classList.remove("ready"),t.removeEventListener(v,i)},300)}function i(e){a.contains(e.target)||n()}var a=t.getElementById("reward"),s=t.getElementById("rewardBtn"),o=t.getElementById("rewardOff");a&&(s.addEventListener(v,function(){return a.classList.contains("in")?n():e()}),o.addEventListener(v,n))}(),fixNavMinH:function(){function e(){n.style.minHeight=n.parentNode.clientHeight-n.nextElementSibling.offsetHeight+"px"}var n=t.querySelector(".nav");return e}(),waterfall:function(){if(!(e.innerWidth<760)){var n=[].slice.call(t.querySelectorAll(".waterfall"));n.forEach(function(e){var t=[].slice.call(e.querySelectorAll(".waterfall-item")),n=[0,0];t.forEach(function(e){var t=n[0]<=n[1]?0:1;e.style.cssText="top:"+n[t]+"px;left:"+(t>0?"50%":0),n[t]+=e.offsetHeight}),e.style.height=Math.max(n[0],n[1])+"px"})}},tabBar:function(e){e.parentNode.classList.toggle("expand")}};e.addEventListener("load",function(){L.fixNavMinH(),L.waterfall(),f.classList.remove("active")}),e.addEventListener("resize",function(){L.fixNavMinH(),L.toggleMenu(),L.waterfall()}),s.addEventListener(v,function(){u(L.goTop)},!1),c.addEventListener(v,function(e){L.toggleMenu(!0),e.preventDefault()},!1),d.addEventListener(v,function(){o.classList.add("hide")},!1),r.addEventListener(v,function(){L.toggleMenu()},!1),t.addEventListener("scroll",function(){var e=m.scrollTop;L.toggleGotop(e),L.fixedHeader(e),L.fixedToc(e)},!1),"BLOG_SHARE"in e&&L.share(),L.docEl=m,L.noop=g,L.even=v,e.BLOG=L,Waves.init(),Waves.attach(".global-share li",["waves-block"]),Waves.attach(".article-tag-list-link, #page-nav a, #page-nav span",["waves-button"])}(window,document);